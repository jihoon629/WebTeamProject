<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <button>제출</button>
    <script>
        const apiKey = "exc8sJCH86r%2BCD8Xp4xzR7KVKJEXsS83J3GVgs3aWLgCMD2iDoBjpuUxV9nIfRTKQdHswD2tolt9eJkteZn%2FCg%3D%3D";
        $button = document.querySelector("button");
        let i; //12-17 강수량, 24-29 온도
        let today = new Date();
        let hour = today.getHours() - 1;// 시간
        let year = today.getFullYear(); //년도
        let Month = today.getMonth() + 1;//월
        let day = today.getDate();//날짜
        let realday = String(year) + String(Month) + String(day);


        const onClickbutton = async () => {
            await fetch(`http://apis.data.go.kr/1360000/VilageFcstInfoService_2.0/getUltraSrtFcst?serviceKey=${apiKey}&numOfRows=30&pageNo=1&dataType=json&base_date=${realday}&base_time=${hour}30&nx=63&ny=124`)
                .then(res => res.json())
                .then(data => apidata = data.response.body.items)
                .catch((err) => console.log(err));



            console.log(apidata);
        };

        $button.addEventListener('click', onClickbutton);
    </script>
</body>

</html>