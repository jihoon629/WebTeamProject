<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <div>성별을 입력하세요. (남자 또는 여자)</div>
    <input type="text" id="genderinput">
    <div>지역을 입력하세요.</div>
    <input type="text" id="areainput">
    <button>제출</button>
    <div><img width="400px" src="" alt=""></div>
    <script>
        const $genderinput = document.querySelector('#genderinput'); // id가 genderinput인 input태그 선택하여 $genderinput에 저장
        const $areainput = document.querySelector('#areainput');
        const $img = document.querySelector('img');
        $button = document.querySelector("button");
        const apiKey = "exc8sJCH86r%2BCD8Xp4xzR7KVKJEXsS83J3GVgs3aWLgCMD2iDoBjpuUxV9nIfRTKQdHswD2tolt9eJkteZn%2FCg%3D%3D";

        let gender;
        let area;
        let today = new Date();
        let hour = today.getHours() - 1;// 시간
        let year = today.getFullYear(); //년도
        let Month = today.getMonth() + 1;//월
        let day = today.getDate();//날짜
        let realday = String(year) + String(Month) + String(day);
        let result = "";

        const onGenderInput = (event) => {
            gender = event.target.value; // input태그에 입력한 값 gender에 저장
        };

        const onAreaInput = (event) => {
            area = event.target.value;
        };

        $genderinput.addEventListener('input', onGenderInput); // input이벤트 발생하면 onGenderInput함수 실행
        $areainput.addEventListener('input', onAreaInput);


        const onClickbutton = async () => {
            await fetch(`http://apis.data.go.kr/1360000/VilageFcstInfoService_2.0/getUltraSrtFcst?serviceKey=${apiKey}&numOfRows=30&pageNo=1&dataType=json&base_date=${realday}&base_time=${hour}30&nx=63&ny=124`)
                .then(res => res.json())
                .then(data => apidata = data.response.body.items)
                .catch((err) => console.log(err));
            recommendation(apidata.item[26].fcstValue, apidata.item[15].fcstValue);
            console.log(result);
        };


        //패션 출력
        const recommendation = (temperature, rainfall) => {
            if (gender == '남자') { // 성별이 남자인 경우
                if (temperature <= 2) { // 기온이 2도 이하인 경우
                    $img.src = "https://image.msscdn.net/images/codimap/detail/28096/detail_28096_1_500.jpg?202311230011";
                    result = "멘트" + " 링크 : <a href='https://example.com'>here</a>";
                } else if (temperature > 2 && temperature <= 9) { // 기온 2도 ~ 9도
                    $img.src = "https://image.msscdn.net/images/codimap/detail/28055/detail_28055_1_500.jpg?202311230011";
                    result = "멘트" + " 링크 : <a href='https://example.com'>here</a>";
                } else if (temperature > 9 && temperature <= 16) { // 기온 9도 ~ 16도
                    $img.src = "https://image.msscdn.net/images/codimap/detail/448/detail_448_1_500.jpg?202311230011";
                    result = "멘트" + " 링크 : <a href='https://example.com'>here</a>";
                } else if (temperature > 16 && temperature <= 23) { // 기온 16도 ~ 23도
                    $img.src = "https://image.msscdn.net/images/codimap/detail/191/detail_191_1_500.jpg?202311230011";
                    result = "멘트" + " 링크 : <a href='https://example.com'>here</a>";
                }
                else { // 기온이 23도 초과인 경우
                    $img.src = "https://image.msscdn.net/images/codimap/detail/1/detail_1_1_500.jpg?202311230011";
                    result = "멘트" + " 링크 : <a href='https://example.com'>here</a>";
                }
            } else if (gender == '여자') { // 성별이 여자인 경우
                if (temperature <= 2) { // 기온이 2도 이하인 경우
                    $img.src = "https://image.msscdn.net/images/codimap/detail/28065/detail_28065_1_500.jpg?202311230011";
                    result = "멘트" + " 링크 : <a href='https://example.com'>here</a>";
                } else if (temperature > 2 && temperature <= 9) { // 기온 2도 ~ 9도
                    $img.src = "https://image.msscdn.net/images/codimap/detail/27750/detail_27750_2_500.jpg?202311222311";
                    result = "멘트" + " 링크 : <a href='https://example.com'>here</a>";
                } else if (temperature > 9 && temperature <= 16) { // 기온 9도 ~ 16도
                    $img.src = "https://image.msscdn.net/images/codimap/detail/303/detail_303_1_500.jpg?202311230111";
                    result = "멘트" + " 링크 : <a href='https://example.com'>here</a>";
                } else if (temperature > 16 && temperature <= 23) { // 기온 16도 ~ 23도
                    $img.src = "https://image.msscdn.net/images/codimap/detail/265/detail_265_1_500.jpg?202311230011";
                    result = "멘트" + " 링크 : <a href='https://example.com'>here</a>";
                }
                else { // 기온이 23도 초과인 경우
                    $img.src = "https://image.msscdn.net/images/codimap/detail/58/detail_58_1_500.jpg?202311230011";
                    result = "멘트" + " 링크 : <a href='https://example.com'>here</a>";
                }
            } else {
                alert("올바르지 않은 성별");
            }

            // if (rainfall > 30) { // 강수확률 30 이상인 경우
            //     result = "멘트";
            // }
            return result;
        };


        $button.addEventListener('click', onClickbutton);
    </script>
</body>

</html>